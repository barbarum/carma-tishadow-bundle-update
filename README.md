tishadow-bundle-update
======================

As the project name described, it provides <a href='https://github.com/miniman42/TiShadow' target='_blank'>TiShadow</a> the ability to do dynamic bundle update, but asynchronized. 
This project is a titanium android native module, and can be installed as an external module into tishadow or your own titanium app or a common titanium sdk native module.


Why redo bundle update?
======================

<p>
You may be confused why we need re-do the bundle update feature, if you are familiar with <a href='https://github.com/miniman42/TiShadow' target='_blank'>TiShadow</a>, 
which has already provided a dynamic bundle update feature.
</p>


<p>
Before answer this question, let us talk about a little bit of titanium app first. Take android for example, when an titanium app is launched,
there are two major thread in the process: UI thread and kroll runtime thread(Here we ignore the background services or any other thread generated by <a target='_blank' href='https://developer.android.com/training/multiple-threads/index.html'>Sending Operations to Multiple Threads</a> ).
The UI thread is from android platform, you can find more reasources <a href='https://developer.android.com/' target='_blank'>here</a>. The runtime thread has only one pre process, is started only if the app is launched, and stayed in background until the process exits completely or is killed. 
It's generally used to manage app's state, handle all javascript event callbacks, scheduled javascript task, dispatch javascript events between UI thread and background taks, which is a very heavy used thread except UI thread.  
</p>

<p>
<b>As mentioned above, all javascript event callbacks has been handled by runtime thread.</b> And most dynamic bundle update work has been done by TiShadow are just some of these callbacks(<a target='_blank' href='https://github.com/miniman42/TiShadow/blob/master/app/Resources/api/Management.js'>source codes</a>).
It's not a big problem until the app need a large update from tishadow server, or your app need very heavy work relying on event callbacks while launching. Heavy works are queued into a single thread and wait for being processed, this can cause your app significantly slow and very bad responsive.
Even more, It seems that kroll runtime thread is not good at heavy work, and queued javascript callbacks can not been executed immediately even tasks later on have been returned.  So worse makes it even worse, and finally the app becomes slow, frozen, crashed very often, make you frustrated.
</p>

<p>
So what the module does is to move bundle update away from runtime thread into 3rd thread. And UI thread or runtime thread can check the update state whenever they need, and can also add event callbacks whenever state is changed, or error occurs, or anything else.
</p>


Getting Started
======================
---------Working in Progress








Backlog
======================
1. Breakpoint resume for bundle update from the application re-launch
2. Force application roll back to specific version
3. Force application to do bundle update again
